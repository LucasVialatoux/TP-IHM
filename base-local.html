<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="./lib/css/bootstrap.min.css">
	  <link rel="stylesheet" href="./lib/css/style.css">
    <!-- Font Awesome -->
  	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css">
  	<!-- Bootstrap core CSS -->
  	<link href="./lib/css/bootstrap.min.css" rel="stylesheet">
  	<!-- Material Design Bootstrap -->
  	<link href="./lib/css/mdb.min.css" rel="stylesheet">
  </head>
  <body>


	 
	 <!-- Menu -->
	 <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  		<span class="navbar-brand" >Gestion QCM</span>
  		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    		<span class="navbar-toggler-icon"></span>
  		</button>
	  	<div class="collapse navbar-collapse" id="navbarText">
	    	<ul class="navbar-nav mr-auto">
	      		<li class="nav-item active">
	        		<a class="nav-link" href="#" onclick="menu(1);">Accueil <span class="sr-only">(current)</span></a>
	      		</li>
	      		<li class="nav-item">
	        		<a class="nav-link" href="#" onclick="menu(2);">Créer QCM</a>
	      		</li>
	      		<li class="nav-item">
	        		<a class="nav-link" href="#" onclick="menu(3);">Afficher QCM</a>
	      		</li>
	      		<li class="nav-item">
	        		<a class="nav-link" href="#" onclick="menu(4);">Nous contacter</a>
	      		</li>
	    	</ul>
	  </div>
	</nav>
	<!-- Fin menu -->
	<div id="creer" class="collapse">
		<div class="container pb-5">
		 	<div class="row" id="formCreation">
		 		<form onsubmit="setQCMname();return false;">
				 	<div class="form-group">
				    	<label for="QCMname">Nom du nouveau QCM</label>
				    	<input type="text" class="form-control" id="QCMname" aria-describedby="qcmHelp" placeholder="Entrer le nom du QCM">
				  	</div>
				  	<button type="button" class="btn btn-primary" onclick="setQCMname();" data-toggle="tooltip" data-placement="top" title="Ce nom vous servira à retrouver votre QCM parmi la liste des QCMs existant">
  					Créer le QCM
					</button>
				</form>
		 	</div>
			<div id="newQCM" >
			 <!-- Default form contact -->
				<form class="text-center border border-light p-4">

				    <p class="h4 mb-4" id="nomQCMFinal"></p>

				    <!-- Nom question -->
				    <input type="text" id="intituleQuestion" class="form-control mb-4" placeholder="Intitulé de la question">

				    <!-- Réponses possible -->
				    <div class="reponses">
					    <div class="row rep">
					    	<div class="col-lg-10">
					    		<input type="text" class="form-control mb-4" placeholder="Réponse possible">
					    	</div>
						    <div class="col-lg-1 pt-1">
						    	<i class="fas fa-plus" onclick="ajouterReponse();"></i>
						    </div>
						    <div class="col-lg-1 pt-1">
						    	<i id="rep1" class="far fa-trash-alt" onclick="supprimerReponse(this.parentNode);"></i>
						    </div>
						</div>
						<div class="row rep">
					    	<div class="col-lg-10">
					    		<input type="text" class="form-control mb-4" placeholder="Réponse possible">
					    	</div>
						    <div class="col-lg-1 pt-1">
						    	<i class="fas fa-plus" onclick="ajouterReponse();"></i>
						    </div>
						    <div class="col-lg-1 pt-1">
						    	<i id="rep2" class="far fa-trash-alt" onclick="supprimerReponse(this.parentNode);"></i>
						    </div>
						</div>
					</div>
					
				    
				    <!-- Cocher réponses correctes -->
				    <label>Cochez la/les réponse(s) correcte(s)</label>

				    <!-- Réponses à cocher-->
				    <div id="cocheReponse">
						<div class="custom-control custom-checkbox custom-control-inline">
						  <input type="checkbox" class="custom-control-input" id="repJuste1">
						  <label class="custom-control-label" for="repJuste1">1</label>
						</div>
						<div class="custom-control custom-checkbox custom-control-inline">
						  <input type="checkbox" class="custom-control-input" id="repJuste2">
						  <label class="custom-control-label" for="repJuste2">2</label>
						</div>
					</div>

				    <!-- Ajout de la question -->
				    <button class="btn btn-info btn-block" type="button" onclick="ajouterQuestion();">Ajouter cette question</button>

				</form>
				<!-- Default form contact -->
			</div>
			<div id="QCMcree" class="card border mb-3">
			  	<div class="card-header">Nom QCM</div>
				<div class="card-body text">
				    <h5 class="card-title">Question 1 <i id="quest1" class="far fa-trash-alt float-right" onclick="supprimerQuestion(this.id);"></i></h5>
				    <div class="table-responsive">
					    <table class="table">
					      	<tbody>
					        	<tr class="RepQCM">
					          		<td>Réponse 1</td>
					          		<td>La réponse</td>
					          		<td></td>
					        	</tr>
					        	<tr class="RepQCM">
					          		<td>Réponse 2</td>
					          		<td>La réponse correcte</td>
					          		<td></td>
					        	</tr>
					      	</tbody>
					    </table>
					</div>
				</div>
			</div>
			</div>

		</div>

	<div id="affichage" class="collapse">
		<div class="card card-body">
    		QCM existant
  		</div>
		<table class="table table-striped">
			<thead>
			<tr>
				<th scope="col">#</th>
				<th scope="col">Nom</th>
				<th scope="col">Auteur</th>
				<th scope="col">Date</th>
				<th scope="col"></th>
			</tr>
			</thead>
			<tbody>
			<tr>
					<th scope="row">1</th>
					<td>Volcan</td>
					<td>lucas</td>
					<td>06/11/15</td>
					<td><b class="plusOuMoins">+</b></td>
			</tr>
			<tr>
				<th scope="row">2</th>
				<td>Recyclage</td>
				<td>antoine</td>
				<td>04/11/11</td>
				<td ><b class="plusOuMoins">+</b></td>
			</tr>
			<tr>
				<th scope="row">3</th>
				<td>Moutarde</td>
				<td>antoine</td>
				<td>09/03/18</td>
				<td><b class="plusOuMoins">+</b></td>
			</tr>
			<tr>
				<th scope="row">4</th>
				<td>Desert</td>
				<td>lucas</td>
				<td>09/01/19</td>
				<td><b class="plusOuMoins">+</b></td>
			</tr>
			<tr>
				<th scope="row">5</th>
				<td>Banque</td>
				<td>lucas</td>
				<td>06/09/16</td>
				<td><b class="plusOuMoins">+</b></td>
			</tr>
			</tbody>
		</table>
	</div>

	<div id="contactRetour" class="collapse">
		<form class="text-center border border-light p-5">

    <p class="h4 mb-4">Contactez-nous</p>

    <!-- Nom de famille -->
    <div class="row">
    	<div class="col-lg-2 pt-2">
    		<label for="contactName" lass="form-control mb-2">Nom</label>
    	</div>
	    <div class="col-lg-10">
	    	<input type="text" id="contactName" class="form-control mb-4" placeholder="Nom">
	    </div>
    </div>
    <!-- Prénom -->
    <div class="row">
    	<div class="col-lg-2 pt-2">
    		<label for="contactFirstName">Prénom</label>
    	</div>
	    <div class="col-lg-10">
	    	<input type="text" id="contactFirstName" class="form-control mb-4" placeholder="Prénom">
	    </div>
    </div>
    <!-- Email -->
    <div class="row">
    	<div class="col-lg-2 pt-2">
    		<label for="contactEmail">E-mail</label>
    	</div>
	    <div class="col-lg-10">
	    	<input type="email" id="contactEmail" class="form-control mb-4" placeholder="E-mail">
	    </div>
    </div>
    <!-- Adresse -->
    <div class="row">
    	<div class="col-lg-2 pt-2">
    		<label for="contactAdresse">Adresse</label>
    	</div>
	    <div class="col-lg-10">
	    	<input type="address" id="contactAdresse" class="form-control mb-4" placeholder="Adresse">
	    </div>
    </div>
    <!-- Téléphone -->
    <div class="row">
    	<div class="col-lg-2 pt-2">
    		<label for="contactTel">Téléphone</label>
    	</div>
	    <div class="col-lg-10">
	    	<input type="tel" name="phone" id="contactTel" class="form-control mb-4" placeholder="06.12.34.56.78" required autocomplete="tel">
	    </div>
    </div>

    <!-- Votre retour -->
    <div class="row">
    	<div class="col-lg-2 pt-2">
    		<label for="contactText">Votre retour</label>
    	</div>
	    <div class="col-lg-10">
	    	<input type="text" id="contactText" class="form-control mb-4" placeholder="Décrivez nous votre retour">
	    </div>
    </div>
    

    <div class="d-flex justify-content-around">
        <div>
            <!-- Recevoir une copie -->
            <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="contactRecevoirCopie">
                <label class="custom-control-label" for="contactRecevoirCopie">Recevoir une copie de ce retour par mail</label>
            </div>
        </div>
    </div>

    <!-- Sign in button -->
    <button class="btn btn-info btn-block my-4" type="submit">Envoyer</button>

    <!-- Register -->
    <p>Not a member?
        <a href="">Register</a>
    </p>

    <!-- Social login -->
    <p>or sign in with:</p>

    <a type="button" class="light-blue-text mx-2">
        <i class="fab fa-facebook-f"></i>
    </a>
    <a type="button" class="light-blue-text mx-2">
        <i class="fab fa-twitter"></i>
    </a>
    <a type="button" class="light-blue-text mx-2">
        <i class="fab fa-linkedin-in"></i>
    </a>
    <a type="button" class="light-blue-text mx-2">
        <i class="fab fa-github"></i>
    </a>

</form>
<!-- Default form login -->
	</div>
	
	
	

	<!-- Footer -->
	<footer class="page-footer font-small stylish-color-dark pt-1" style="position:fixed;width:100%;">

    	<!-- Réseaux Sociaux -->
    	<ul class="list-unstyled list-inline text-center">
    	  	<li class="list-inline-item">
    	    	<a class="btn-floating btn-fb mx-1" href="https://www.facebook.com/">
    	      		<i class="fab fa-facebook-f"> </i>
    	    	</a>
    	  	</li>
    	  	<li class="list-inline-item">
    	    	<a class="btn-floating btn-tw mx-1" href="https://twitter.com/">
    	      		<i class="fab fa-twitter"> </i>
    	    	</a>
    	  	</li>
    	  	<li class="list-inline-item">
    	    	<a class="btn-floating btn-gplus mx-1" href="https://plus.google.com/">
    	      		<i class="fab fa-google-plus-g"> </i>
    	    	</a>
    	  	</li>
    	  	<li class="list-inline-item">
    	    	<a class="btn-floating btn-li mx-1" href="https://www.linkedin.com/">
    	      		<i class="fab fa-linkedin-in"> </i>
    	    	</a>
    	  	</li>
    	</ul>
    	<hr>
    	<!-- Réalisation -->
    	<div class="footer text-center py-3">Site web réalisé par L.Vialatoux & A.Dulhoste
    	</div>
	</footer>
	<!-- Fin footer -->

    <!-- Optional JavaScript: jQuery first, then Popper.js (popups), then Bootstrap JS -->
	<script src="./lib/js/jquery-3.3.1.min.js"></script>
	<script src="./lib/js/popper.min.js"></script>
	<script src="./lib/js/bootstrap.min.js"></script>

	


	 <!--
		C'est ici que vous insérez votre code JavaScript.
	 -->
	<script>
		function menu(id){
			if (id==1) {
				$('#creer').hide();
				$('#affichage').hide();
				$('#contactRetour').hide();
			} else if (id==2){
				$('#creer').show();
				$('#affichage').hide();
				$('#contactRetour').hide();
			} else if (id==3){
				$('#creer').hide();
				$('#affichage').show();
				$('#contactRetour').hide();
			} else if (id==4){
				$('#creer').hide();
				$('#affichage').hide();
				$('#contactRetour').show();
				
			}
		}

		function deroulerAffichage(){
			btnCreer = document.getElementById("btnCreer");
			divCreer = document.getElementById("Creer");
			divCreer.style.visibility="hidden";
			btnCreer.style.visibility="hidden";
		}

		function setQCMname(){
			nomQCM = document.getElementById("QCMname").value;
			document.getElementById("nomQCMFinal").textContent=nomQCM;
			document.getElementById("newQCM").style.visibility="visible";
			document.getElementById("formCreation").style.visibility="hidden";
		}

		nbreReponse = 2;
		function ajouterReponse(){
			nbreReponse+=1;
			//Clonage de l'élément et ajout à la fin du noeud
			node=document.getElementsByClassName("reponses")[0];
			rep=document.getElementsByClassName("row rep")[1];
			var repClone = rep.cloneNode(true);
			//Ajout id différent pour le clone
			nbre=document.getElementsByClassName("row rep").length+1
			repClone.getElementsByClassName("col-lg-1 pt-1")[1].getElementsByClassName("far fa-trash-alt")[0].id="rep"+nbreReponse;
			//On s'assure qu'aucune réponse n'est clonée
			repClone.getElementsByClassName("form-control mb-4")[0].value="";
			node.appendChild(repClone);
			
			//Ajout case à cocher
			nodeCoche=document.getElementById("cocheReponse");
			coche = document.getElementsByClassName("custom-control custom-checkbox custom-control-inline")[0];
			var cocheClone = coche.cloneNode(true);
			//modifier ID + valeur for du label + non coché
			cocheClone.getElementsByClassName("custom-control-input")[0].checked=false;
			cocheClone.getElementsByClassName("custom-control-input")[0].id="repJuste"+nbreReponse
			cocheClone.getElementsByClassName("custom-control-label")[0].htmlFor="repJuste"+nbreReponse
			nodeCoche.appendChild(cocheClone);
			//Ajout et calcul numéro rép
			cocheName = document.getElementsByClassName("custom-control-label");
			nbrepMoins=nbreReponse-1;
			cocheName[nbrepMoins].textContent=nbreReponse;
		}

		function supprimerReponse(nodePar){
			if(nbreReponse>2){
				nodePar.parentNode.remove();
				document.getElementsByClassName("custom-control custom-checkbox custom-control-inline")[nbreReponse-1].remove();
				nbreReponse=nbreReponse-1;
			} else {
				alert("2 réponses minimum !");
			}
		}

		nbreQuestion =0;

		function ajouterQuestion(){
			nbreQuestion =+1;
			if (nbreQuestion == 1){

			}
			//set nom QCM
			nomQCM = document.getElementById("QCMname").value;
			document.getElementsByClassName("card-header")[0].innerText= nomQCM;

			//set nom Question
			nomQuestion = document.getElementById("intituleQuestion").value;
			document.getElementsByClassName("card-title")[0].innerText = nomQuestion;

			//Compter nombre réponses
			nbreRep = document.getElementsByClassName("row rep").length;

			document.getElementById("QCMcree").style.visibility="visible";

			//test qu'on a bien un minimum de 2 questions
			if (nbreRep >=2){
				for (i=0;i<nbreRep;i++){
					nomRep=document.getElementsByClassName("form-control mb-4")[i+1].value;
					document.getElementsByClassName("RepQCM")[i].getElementsByTagName("td")[1].innerText=nomRep;
					//test si cette réponse est une réponse correcte
					booljuste = document.getElementsByClassName("custom-control-input")[i].checked
					if (booljuste == true){
						document.getElementsByClassName("RepQCM")[i].className = "RepQCM table-success";
					} else {
						document.getElementsByClassName("RepQCM")[i].className = "RepQCM";
					}
				}
			} else {
				alert("2 réponses minimum !");
			}
		}

		//Activer les tooltip
		$(function () {
  			$('[data-toggle="tooltip"]').tooltip()
		})
		
	</script>
	
  </body>
</html>