<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="./lib/css/bootstrap.min.css">
	  <link rel="stylesheet" href="./lib/css/style.css">
    <!-- Font Awesome -->
  	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css">
  	<!-- Bootstrap core CSS -->
  	<link href="./lib/css/bootstrap.min.css" rel="stylesheet">
  	<!-- Material Design Bootstrap -->
  	<link href="./lib/css/mdb.min.css" rel="stylesheet">
  </head>
  <body>


	 
	 <!-- Menu -->
	 <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  		<span class="navbar-brand" >Gestion QCM</span>
  		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    		<span class="navbar-toggler-icon"></span>
  		</button>
	  	<div class="collapse navbar-collapse" id="navbarText">
	    	<ul class="navbar-nav mr-auto">
	      		<li class="nav-item active">
	        		<a class="nav-link" href="#">Accueil <span class="sr-only">(current)</span></a>
	      		</li>
	      		<li class="nav-item">
	        		<a class="nav-link" data-toggle="collapse" href="#creer">Créer QCM</a>
	      		</li>
	      		<li class="nav-item">
	        		<a class="nav-link" data-toggle="collapse" href="#affichage">Afficher QCM</a>
	      		</li>
	    	</ul>
	  </div>
	</nav>
	<!-- Fin menu -->
	<div id="creer" class="collapse">
		<div class="container pb-5">
		 	<div class="row">
		 		<form onsubmit="setQCMname();return false;">
				 	<div class="form-group">
				    	<label for="QCMname">Nom du nouveau QCM</label>
				    	<input type="text" class="form-control" id="QCMname" aria-describedby="qcmHelp" placeholder="Entrer le nom du QCM">
				    	<small id="qcmHelp" class="form-text text-muted">Ce nom vous servira à retrouver votre QCM parmi la liste des QCMs existant.</small>
				  	</div>
				  	<button type="button" class="btn btn-primary" onclick="setQCMname();" data-toggle="collapse" href="#newQCM">Créer le QCM</button>
				</form>
		 	</div>
			<div id="newQCM" >
			 <!-- Default form contact -->
				<form class="text-center border border-light p-4">

				    <p class="h4 mb-4" id="nomQCMFinal"></p>

				    <!-- Nom question -->
				    <input type="text" id="intituleQuestion" class="form-control mb-4" placeholder="Intitulé de la question" onchange="ajouterQuestion();">

				    <!-- Réponses possible -->
				    <div class="reponses">
					    <div class="row rep">
					    	<div class="col-lg-10">
					    		<input type="text" class="form-control mb-4" placeholder="Réponse possible">
					    	</div>
						    <div class="col-lg-1 pt-1">
						    	<i class="fas fa-plus" onclick="ajouterReponse();"></i>
						    </div>
						    <div class="col-lg-1 pt-1">
						    	<i id="rep1" class="far fa-trash-alt" onclick="supprimerReponse(this.id);"></i>
						    </div>
						</div>
						<div class="row rep">
					    	<div class="col-lg-10">
					    		<input type="text" class="form-control mb-4" placeholder="Réponse possible">
					    	</div>
						    <div class="col-lg-1 pt-1">
						    	<i class="fas fa-plus" onclick="ajouterReponse();"></i>
						    </div>
						    <div class="col-lg-1 pt-1">
						    	<i id="rep2" class="far fa-trash-alt" onclick="supprimerReponse(this.id);"></i>
						    </div>
						</div>
					</div>
					
				    
				    <!-- Cocher réponses correctes -->
				    <label>Cochez la/les réponse(s) correcte(s)</label>

				    <!-- Réponses à cocher-->
				    <div id="cocheReponse">
						<div class="custom-control custom-checkbox custom-control-inline">
						  <input type="checkbox" class="custom-control-input" id="repJuste1">
						  <label class="custom-control-label" for="repJuste1">1</label>
						</div>
						<div class="custom-control custom-checkbox custom-control-inline">
						  <input type="checkbox" class="custom-control-input" id="repJuste2">
						  <label class="custom-control-label" for="repJuste2">2</label>
						</div>
					</div>

				    <!-- Ajout de la question -->
				    <button class="btn btn-info btn-block" type="submit">Ajouter cette question</button>

				</form>
				<!-- Default form contact -->
			</div>
		</div>
	</div>
	<div id="affichage" class="collapse">
		<div class="card card-body">
    		QCM existant
  		</div>
		<table class="table table-striped">
			<thead>
			<tr>
				<th scope="col">#</th>
				<th scope="col">Nom</th>
				<th scope="col">Auteur</th>
				<th scope="col">Date</th>
				<th scope="col"></th>
			</tr>
			</thead>
			<tbody>
			<tr>
					<th scope="row">1</th>
					<td>Volcan</td>
					<td>lucas</td>
					<td>06/11/15</td>
					<td><b class="plusOuMoins">+</b></td>
			</tr>
			<tr>
				<th scope="row">2</th>
				<td>Recyclage</td>
				<td>antoine</td>
				<td>04/11/11</td>
				<td ><b class="plusOuMoins">+</b></td>
			</tr>
			<tr>
				<th scope="row">3</th>
				<td>Moutarde</td>
				<td>antoine</td>
				<td>09/03/18</td>
				<td><b class="plusOuMoins">+</b></td>
			</tr>
			<tr>
				<th scope="row">4</th>
				<td>Desert</td>
				<td>lucas</td>
				<td>09/01/19</td>
				<td><b class="plusOuMoins">+</b></td>
			</tr>
			<tr>
				<th scope="row">5</th>
				<td>Banque</td>
				<td>lucas</td>
				<td>06/09/16</td>
				<td><b class="plusOuMoins">+</b></td>
			</tr>
			</tbody>
		</table>
	</div>

	
	
	

	<!-- Footer -->
	<footer class="page-footer font-small stylish-color-dark pt-1" style="position:fixed;width:100%;">

    	<!-- Réseaux Sociaux -->
    	<ul class="list-unstyled list-inline text-center">
    	  	<li class="list-inline-item">
    	    	<a class="btn-floating btn-fb mx-1" href="https://www.facebook.com/">
    	      		<i class="fab fa-facebook-f"> </i>
    	    	</a>
    	  	</li>
    	  	<li class="list-inline-item">
    	    	<a class="btn-floating btn-tw mx-1" href="https://twitter.com/">
    	      		<i class="fab fa-twitter"> </i>
    	    	</a>
    	  	</li>
    	  	<li class="list-inline-item">
    	    	<a class="btn-floating btn-gplus mx-1" href="https://plus.google.com/">
    	      		<i class="fab fa-google-plus-g"> </i>
    	    	</a>
    	  	</li>
    	  	<li class="list-inline-item">
    	    	<a class="btn-floating btn-li mx-1" href="https://www.linkedin.com/">
    	      		<i class="fab fa-linkedin-in"> </i>
    	    	</a>
    	  	</li>
    	</ul>
    	<hr>
    	<!-- Réalisation -->
    	<div class="footer text-center py-3">Site web réalisé par L.Vialatoux & A.Dulhoste
    	</div>
	</footer>
	<!-- Fin footer -->

    <!-- Optional JavaScript: jQuery first, then Popper.js (popups), then Bootstrap JS -->
	<script src="./lib/js/jquery-3.3.1.min.js"></script>
	<script src="./lib/js/popper.min.js"></script>
	<script src="./lib/js/bootstrap.min.js"></script>

	


	 <!--
		C'est ici que vous insérez votre code JavaScript.
	 -->
	<script>
		function deroulerAffichage(){
			btnCreer = document.getElementById("btnCreer");
			divCreer = document.getElementById("Creer");
			divCreer.style.visibility="hidden";
			btnCreer.style.visibility="hidden";
		}

		function setQCMname(){
			nomQCM = document.getElementById("QCMname").value;
			document.getElementById("nomQCMFinal").textContent=nomQCM;
		}

		function ajouterReponse(){
			//Clonage de l'élément et ajout à la fin du noeud
			node=document.getElementsByClassName("reponses")[0];
			rep=document.getElementsByClassName("row rep")[1];
			var repClone = rep.cloneNode(true);
			//Ajout id différent pour le clone
			nbre=document.getElementsByClassName("row rep").length+1
			repClone.getElementsByClassName("col-lg-1 pt-1")[1].getElementsByClassName("far fa-trash-alt")[0].id="rep"+nbre;
			//On s'assure qu'aucune réponse n'est clonée
			repClone.getElementsByClassName("form-control mb-4")[0].value="";
			node.appendChild(repClone);
			
			//Ajout case à cocher
			nodeCoche=document.getElementById("cocheReponse");
			coche = document.getElementsByClassName("custom-control custom-checkbox custom-control-inline")[0];
			var cocheClone = coche.cloneNode(true);
			nodeCoche.appendChild(cocheClone);
			//Ajout et calcul numéro rép
			cocheName = document.getElementsByClassName("custom-control-label");
			nbrep=cocheName.length;
			nbrepMoins=nbrep-1;
			cocheName[nbrepMoins].textContent=nbrep;
		}

		function supprimerReponse(id){
			nbreRep = document.getElementsByClassName("custom-control-label").length;
			console.log(id);
			if(nbreRep>2){
				document.getElementsByClassName("row rep")[id.substring(3)-1].remove();
				document.getElementsByClassName("custom-control custom-checkbox custom-control-inline")[nbreRep-1].remove();
			} else {
				alert("2 réponses minimum !");
			}
		}

		function ajouterQuestion(){

		}
		
	</script>
	
  </body>
</html>